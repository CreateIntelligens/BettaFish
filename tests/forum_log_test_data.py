"""
論壇日誌測試數據

包含各種日誌格式的最小示例，用於測試ForumEngine/monitor.py中的日誌解析函數。
涵蓋舊格式（[HH:MM:SS]）和新格式（loguru默認格式）的日誌記錄示例。
"""

# ===== 舊格式（支持 [HH:MM:SS]）=====

# 單行JSON，舊格式
OLD_FORMAT_SINGLE_LINE_JSON = """[17:42:31] 2025-11-05 17:42:31.287 | INFO | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {"paragraph_latest_state": "這是首次總結內容"}"""

# 多行JSON，舊格式
OLD_FORMAT_MULTILINE_JSON = [
    "[17:42:31] 2025-11-05 17:42:31.287 | INFO | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {",
    "[17:42:31] \"paragraph_latest_state\": \"這是多行\\nJSON內容\"",
    "[17:42:31] }"
]

# 包含FirstSummaryNode的舊格式日誌
OLD_FORMAT_FIRST_SUMMARY = """[17:42:31] 2025-11-05 17:42:31.287 | INFO | InsightEngine.nodes.summary_node:process_output:131 - FirstSummaryNode 清理後的輸出: {"paragraph_latest_state": "首次總結"}"""

# 包含ReflectionSummaryNode的舊格式日誌
OLD_FORMAT_REFLECTION_SUMMARY = """[17:43:00] 2025-11-05 17:43:00.272 | INFO | InsightEngine.nodes.summary_node:process_output:296 - ReflectionSummaryNode 清理後的輸出: {"updated_paragraph_latest_state": "反思總結"}"""

# 舊格式，非目標節點（應該被忽略）
OLD_FORMAT_NON_TARGET = """[17:41:16] 2025-11-05 17:41:16.742 | INFO | InsightEngine.nodes.report_structure_node:run:52 - 正在爲查詢生成報告結構"""


# ===== 新格式（loguru默認格式）=====

# 單行JSON，新格式
NEW_FORMAT_SINGLE_LINE_JSON = """2025-11-05 17:42:31.287 | INFO     | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {"paragraph_latest_state": "這是首次總結內容"}"""

# 多行JSON，新格式
NEW_FORMAT_MULTILINE_JSON = [
    "2025-11-05 17:42:31.287 | INFO     | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {",
    "2025-11-05 17:42:31.288 | INFO     | InsightEngine.nodes.summary_node:process_output:132 - \"paragraph_latest_state\": \"這是多行\\nJSON內容\"",
    "2025-11-05 17:42:31.289 | INFO     | InsightEngine.nodes.summary_node:process_output:133 - }"
]

# 包含FirstSummaryNode的新格式日誌
NEW_FORMAT_FIRST_SUMMARY = """2025-11-05 17:42:31.287 | INFO     | InsightEngine.nodes.summary_node:process_output:131 - FirstSummaryNode 清理後的輸出: {"paragraph_latest_state": "首次總結"}"""

# 包含ReflectionSummaryNode的新格式日誌
NEW_FORMAT_REFLECTION_SUMMARY = """2025-11-05 17:43:00.272 | INFO     | InsightEngine.nodes.summary_node:process_output:296 - ReflectionSummaryNode 清理後的輸出: {"updated_paragraph_latest_state": "反思總結"}"""

# 新格式，非目標節點（應該被忽略）
NEW_FORMAT_NON_TARGET = """2025-11-05 17:41:16.742 | INFO     | InsightEngine.nodes.report_structure_node:run:52 - 正在爲查詢生成報告結構: 洛陽鉬業預期股價變化"""

# 新格式，ForumEngine的日誌
NEW_FORMAT_FORUM_ENGINE = """2025-11-05 22:31:09.964 | INFO     | ForumEngine.monitor:monitor_logs:457 - ForumEngine: 論壇創建中..."""


# ===== 複雜JSON示例 =====

# 包含updated_paragraph_latest_state的JSON（應該優先提取這個）
COMPLEX_JSON_WITH_UPDATED = [
    "2025-11-05 17:43:00.272 | INFO     | InsightEngine.nodes.summary_node:process_output:296 - 清理後的輸出: {",
    "2025-11-05 17:43:00.273 | INFO     | InsightEngine.nodes.summary_node:process_output:297 - \"updated_paragraph_latest_state\": \"## 核心發現（更新版）\\n1. 這是更新後的內容\"",
    "2025-11-05 17:43:00.274 | INFO     | InsightEngine.nodes.summary_node:process_output:298 - }"
]

# 只有paragraph_latest_state的JSON
COMPLEX_JSON_WITH_PARAGRAPH = [
    "2025-11-05 17:42:31.287 | INFO     | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {",
    "2025-11-05 17:42:31.288 | INFO     | InsightEngine.nodes.summary_node:process_output:132 - \"paragraph_latest_state\": \"## 核心發現概述\\n1. 這是首次總結內容\"",
    "2025-11-05 17:42:31.289 | INFO     | InsightEngine.nodes.summary_node:process_output:133 - }"
]

# 包含換行符的JSON內容
COMPLEX_JSON_WITH_NEWLINES = [
    "[17:42:31] 2025-11-05 17:42:31.287 | INFO | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {",
    "[17:42:31] \"paragraph_latest_state\": \"第一行內容\\n第二行內容\\n第三行內容\"",
    "[17:42:31] }"
]

# ===== 邊界情況 =====

# 不包含"清理後的輸出"的行（應該被忽略）
LINE_WITHOUT_CLEAN_OUTPUT = """2025-11-05 17:42:31.287 | INFO     | InsightEngine.nodes.summary_node:process_output:131 - JSON解析成功"""

# 包含"清理後的輸出"但不是JSON格式
LINE_WITH_CLEAN_OUTPUT_NOT_JSON = """2025-11-05 17:42:31.287 | INFO     | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: 這不是JSON格式的內容"""

# 空行
EMPTY_LINE = ""

# 只有時間戳的行
LINE_WITH_ONLY_TIMESTAMP_OLD = "[17:42:31]"
LINE_WITH_ONLY_TIMESTAMP_NEW = "2025-11-05 17:42:31.287 | INFO | module:function:1 -"

# 無效的JSON格式
INVALID_JSON = [
    "2025-11-05 17:42:31.287 | INFO | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {",
    "2025-11-05 17:42:31.288 | INFO | InsightEngine.nodes.summary_node:process_output:132 - \"paragraph_latest_state\": \"缺少結束引號",
    "2025-11-05 17:42:31.289 | INFO | InsightEngine.nodes.summary_node:process_output:133 - }"
]

# ===== 混合格式（同一批日誌中既有舊格式也有新格式）=====
MIXED_FORMAT_LINES = [
    "[17:42:31] 2025-11-05 17:42:31.287 | INFO | InsightEngine.nodes.summary_node:process_output:131 - 清理後的輸出: {",
    "2025-11-05 17:42:31.288 | INFO     | InsightEngine.nodes.summary_node:process_output:132 - \"paragraph_latest_state\": \"混合格式內容\"",
    "[17:42:31] }"
]

# ===== 實際生產環境日誌示例 =====

# QueryEngine反思總結 - 多行JSON格式
REAL_QUERY_ENGINE_REFLECTION = [
    "[10:56:04] 2025-11-06 10:56:04.759 | INFO     | QueryEngine.nodes.summary_node:process_output:302 - 清理後的輸出: {",
    "[10:56:04] \"updated_paragraph_latest_state\": \"洛陽欒川鉬業集團股份有限公司（簡稱洛陽鉬業，CMOC）是中國大陸領先的鉬生產企業，同時也是全球頂級的有色金屬和稀有金屬生產商之一。公司前身可追溯至1969年經原國家冶金部審批成立的欒川縣小型選礦廠。1999年，洛陽欒川鉬業集團正式成立，並於2006年改製爲股份制有限公司。歷經2004年和2014年的兩次混合所有制改革，洛陽鉬業目前是一家民營控股的股份制公司。公司於2007年在香港聯合交易所上市（股票代碼：03993），並於2012年迴歸A股在上海證券交易所上市（股票代碼：603993）。\\n\\n洛陽鉬業的核心業務涵蓋基本金屬、稀有金屬的採、選、冶及加工，包括鉬、鎢、銅、鈷、鈮、磷等，同時積極開展礦產貿易業務。公司的業務足跡遍佈亞洲、非洲、南美洲和歐洲，是全球領先的銅、鈷、鉬、鎢、鈮生產商，也是巴西領先的磷肥生產商。截至2025年三季度，公司實現營業收入1454.85億元，歸母淨利潤86.71億元，經營性淨現金流達120.09億元，資產負債率進一步優化至50.15%。\\n\\n### 戰略與運營升級\\n2025年公司迎來重要戰略轉折，引入具有國際化視野的管理團隊，新董事長劉建鋒（前中國海油集團商務總監）與常務副總裁闕朝陽（前紫金礦業集團高管）主導推動組織架構革新。通過收購厄瓜多爾Cangrejos金礦（預計2029年投產）等關鍵併購，實現資產組合向多品種（銅、黃金爲主）、多國家（覆蓋非洲、南美）、多階段（生產與綠地項目結合）轉型。剛果（金）核心礦區通過『小改小革』持續優化，2028年規劃銅產能達80-100萬噸，NziloII水電站建設有效緩解能源約束。\\n\\n### 行業地位與財務表現\\n據2025年《財富》中國500強最新排名，洛陽鉬業以2130.29億元營收躍居第138位，市值突破2500億元。公司獨創『礦山+貿易』雙輪模式，IXM貿易平臺掌控全球12%銅精礦貿易量，TFM與KFM項目成本分別進入全球前30%和前10%分位。新能源金屬領域保持絕對優勢，鈷產能佔全球40%以上，近期剛果（金）出口管制政策促使鈷價反彈，2025年上半年均價較2024年提升26%。\\n\\n### 技術與社會責任\\n5G智慧礦山實現穿孔、運輸、破碎全流程無人化，開採成本較國際同行低18-22%。ESG建設方面，MSCI評級提升至BBB級，通過TCFD框架披露氣候風險，礦山電動化率35%，減排強度同比下降19%。2025年實施每股0.255元現金分紅，持續回饋股東。\\n\\n### 未來展望\\n管理層預計2026-2028年將維持高強度併購，重點關注銅金資源，已儲備多個潛在項目。厄瓜多爾Cangrejos金礦（預計年產黃金11.5噸）與KFM二期擴建構成中期增長極，摩根士丹利預測2027年銅當量產能突破150萬噸。公司資產負債率控制在50%安全線內，在手現金超320億元，爲戰略佈局提供充足彈藥。\"",
    "[10:56:04] }"
]

# InsightEngine反思總結 - 多行JSON格式（包含"正在生成反思總結"標識）
REAL_INSIGHT_ENGINE_REFLECTION = [
    "[10:55:19] 2025-11-06 10:55:19.563 | INFO     | InsightEngine.nodes.summary_node:run:265 - 正在生成反思總結",
    "[10:56:41] 2025-11-06 10:56:41.626 | INFO     | InsightEngine.nodes.summary_node:process_output:296 - 清理後的輸出: {",
    "[10:56:41] \"updated_paragraph_latest_state\": \"## 核心發現（更新版）\\n洛陽鉬業2025年第三季度市場表現呈現結構性分化，在全球銅價同比上漲18%（LME三個月期銅均價$8,927/噸）的背景下，公司股價卻累計下跌12.3%，與申萬有色金屬指數7.8%的漲幅形成鮮明對比。深入分析顯示，這種背離主要源於三大矛盾：全球能源轉型紅利與區域性運營風險的博弈、資源稟賦優勢與ESG短板的衝突、以及機構估值框架轉變與散戶認知滯後的錯位。最新輿情監測發現，專業投資者討論焦點已從產量數據轉向剛果（金）社區索賠案件的司法進展（涉及金額預估2.3億美元），而散戶仍在熱議『新能源金屬』概念炒作。\\n\\n## 詳細數據畫像\\n### 產量與成本\\n- 剛果（金）TFM銅鈷礦：Q3銅產量12.8萬噸（環比-7%），鈷產量5,200噸（環比-9%），單位現金成本升至$1.52/lb（Q2爲$1.38），因當地罷工導致14天停產（損失產值約3.2億元）\\n- 巴西鈮磷礦：鈮鐵產量2.1萬噸（同比+4%），磷肥產量28萬噸（創紀錄），海運費用佔比升至23%（2024年平均17%），但因巴西雷亞爾貶值節約本地成本1.8億元\\n- 澳洲NPM銅金礦：銅品位下滑至0.72%（上年同期0.81%），但通過提高回收率維持產量穩定（回收率提升2.3個百分點至89.7%）\\n\\n### 財務指標\\n- 營收：Q3實現287億元（同比+9.2%，環比-5.3%），低於彭博一致預期6%，主因銅鈷銷量下滑\\n- 現金流：經營活動現金流淨額42億元（同比-18%），資本開支達35億元（KFM項目佔72%）\\n- 負債：資產負債率升至58.3%（2024年末54.1%），新增20億元公司債票面利率6.8%（較同行高120bp）\\n\\n### 市場反應\\n- 股價表現：三季度累計換手率287%，顯著高於紫金礦業（189%）和江西銅業（156%），振幅達43%\\n- 機構動向：北向資金持倉減少1.2億股，挪威養老基金持股比例從2.1%降至1.4%（ESG調倉）\\n- 輿情熱度：百度指數『洛陽鉬業』日均搜索量3,215次（同業排名第4），但專業平臺Wind詞頻統計顯示分析師關注度排名第2（含327份研報）\\n\\n## 多元聲音匯聚\\n產業視角：\\n1. 【Fastmarkets分析師】『剛果（金）新礦業稅實施後，TFM項目有效稅率從31.5%升至35.8%，每磅銅的稅負增加$0.12』（報告被引用87次）\\n2. 【巴西礦業協會】『儘管海運成本上升，洛陽鉬業的鈮磷礦仍是全球成本曲線左端20%的優質資產』\\n3. 【剛果礦業部長聲明】『要求外資礦業企業本地採購比例需在2026年前達到40%』（現行25%）\\n4. 【澳洲礦產委員會】『NPM礦的勞工成本已超出可承受範圍，可能影響2026年擴產計劃』\\n\\n投資者聲音：\\n5. 【雪球用戶@價值挖掘機】『DCF模型顯示，若剛果政策風險溢價上調200bp，公司合理估值應下調15-20%』（附詳細測算表格，獲專業認證）\\n6. 【股吧熱帖】『社保基金三季報減持後，融資餘額反而增加4.3億元，多空博弈激烈』（單日點擊量超10萬）\\n7. 【推特機構賬號】『MSCI將公司治理(G)評分從6.2降至5.4，主因董事會獨立性問題』\\n8. 【機構投資者調研紀要】『至少7家基金質疑剛果子公司分紅政策（近三年分紅率僅12%）』\\n9. 【Reddit散戶討論】『看漲期權持倉量暴增300%，集中行權價9元』\\n\\n國際視角：\\n10. 【彭博社報道】『洛陽鉬業與嘉能可的KFM項目股權談判陷入僵局，雙方對2026年後鈷價預期差異達$5/lb』\\n11. 【剛果當地媒體】『TFM周邊社區新提起3起環境訴訟，要求賠償金合計8,000萬美元』\\n12. 【澳洲礦業工人論壇】『NPM礦區的工會正醞釀新一輪薪資談判，現有合同溢價已達行業平均125%』\\n13. 【路透社】『中國進出口銀行可能爲KFM項目提供15億美元再融資』\\n14. 【非洲發展銀行報告】『剛果礦業社區衝突事件同比增加47%』\\n\\n## 深層洞察升級\\n### 政策風險量化\\n通過蒙特卡洛模擬測算，在以下情境下：（1）剛果 royalty rate 上調3個百分點（2）海運成本維持當前水平（3）鈷價徘徊在$25/lb，公司2026年EBITDA可能縮水23-28億元。敏感性分析顯示，剛果政策變量對估值影響權重從去年的18%升至31%。地緣政治專家指出，剛果大選臨近使礦業政策不確定性指數達78（警戒線70）。\\n\\n### ESG影響拆解\\n- 環境(E)：尾礦庫管理被MSCI標紅，主要因剛果項目的水循環利用率僅72%（國際同行平均85%），且2025年發生2次小規模滲漏\\n- 社會(S)：社區關系評分暴跌，源於Q3當地僱傭比例降至43%（承諾目標60%），且醫療投入同比減少15%\\n- 治理(G)：董事會中獨立董事佔比33%（僅1名具國際礦業經驗），低於國際礦業公司平均45%的水平\\n\\n### 資金行爲解析\\n龍虎榜數據顯示，三季度機構專用席位淨賣出23億元（創歷史季度紀錄），但同時量化基金交易佔比從12%升至19%，顯示算法交易對股價波動增強效應。北向資金持倉成本分析表明，外資止損線集中在6.8元附近（現價7.2元）。值得注意的是，大宗交易溢價率從Q2的-3%收窄至-1.2%，暗示部分長線資金開始逢低吸納。\\n\\n## 趨勢和模式識別\\n1. 信息分層加劇：專業機構通過LME庫存數據（近期亞洲倉庫銅庫存增加35%）預判供需變化，而散戶仍依賴券商研報的樂觀預測（『買入』評級佔比仍達68%但較Q2下降11%）\\n2. ESG因子定價權提升：負面評級直接導致11月3日股價跳空低開3.2%，創三個月最大單日缺口\\n3. 多空博弈新特徵：融券餘額歷史首次突破5億元（日均利率達8.6%），同時場外期權隱含波動率升至52%（高於行業平均38%）\\n4. 成本通脹傳導滯後：雖然硫酸等輔料價格上漲23%，但產品售價僅提升9%，毛利率承壓明顯\\n\\n## 對比分析\\n| 維度                | 洛陽鉬業               | 紫金礦業               | 江西銅業               | 行業平均               |\\n|---------------------|------------------------|------------------------|------------------------|------------------------|\\n| 海外營收佔比        | 68%                    | 55%                    | 32%                    | 48%                    |\\n| 銅礦現金成本        | $1.52/lb               | $1.35/lb               | $1.48/lb               | $1.45/lb               |\\n| ESG評級             | BB-(MSCI)              | BBB(S&P)               | BB+(MSCI)              | BBB-(S&P)              |\\n| Q3機構調研次數      | 87次                   | 126次                  | 53次                   | 89次                   |\\n| 散戶持股比例        | 41%                    | 38%                    | 45%                    | 42%                    |\\n| 海外項目糾紛數      | 4起                    | 2起                    | 1起                    | 2.3起                  |\\n| 研發投入佔比        | 0.8%                   | 1.2%                   | 0.9%                   | 1.1%                   |\\n\\n*數據週期：2025年第三季度，來源：公司公告、各評級機構、滬深交易所、彭博終端*\"",
    "[10:56:41] }"
]

# MediaEngine反思總結 - 單行JSON格式
REAL_MEDIA_ENGINE_REFLECTION = """[10:56:15] 2025-11-06 10:56:15.779 | INFO     | MediaEngine.nodes.summary_node:run:268 - 正在生成反思總結
[10:56:42] 2025-11-06 10:56:42.337 | INFO     | MediaEngine.nodes.summary_node:process_output:302 - 清理後的輸出: {"updated_paragraph_latest_state": "## 綜合信息概覽\\r\\n根據當前查詢需求，本段將圍繞洛陽鉬業的基本情況展開分析，重點涵蓋其公司成立時間、總部位置、主營業務以及在全球礦業領域的地位。儘管本次提供的搜索結果爲空，但基於對公開權威信息的掌握和行業常識，結合企業官網、年報及主流財經媒體的歷史報道，可以系統性地還原洛陽鉬業的核心概況。作爲全球領先的多元化礦業集團，洛陽鉬業在中國乃至世界有色金屬行業中佔據重要地位，其發展歷程、戰略佈局與資源控制能力均體現出顯著的國際化特徵。\\r\\n\\r\\n## 文本內容深度分析\\r\\n洛陽鉬業全稱爲洛陽欒川鉬業集團股份有限公司，成立於2003年，其前身可追溯至1969年建立的欒川鉬礦，標誌着企業在鉬鎢資源開發領域擁有深厚的歷史積澱。公司於2007年在香港聯交所主板上市（股票代碼：03993.HK），並於2012年在上海證券交易所主板上市（股票代碼：603993），形成A+H股雙資本平臺格局，增強了融資能力和國際影響力。總部位於河南省洛陽市欒川縣，地處中國中部重要的礦產資源富集區，依託當地豐富的鉬、鎢等戰略金屬儲量，構建了從採礦、選礦到深加工的一體化產業鏈。公司的主營業務聚焦於基本金屬和稀有金屬的勘探、開採、加工與銷售，核心產品包括鉬、鎢、銅、鈷、鈮、磷以及黃金等，形成了多元化的礦產品組合，有效提升了抗週期波動的能力。尤其在鉬資源方面，洛陽鉬業擁有的欒川礦區被譽爲'世界三大鉬礦之一'，其鉬金屬儲量位居全球前列；而在鎢資源方面也具備世界級規模，是中國乃至全球最重要的鎢生產商之一。近年來，通過一系列跨國併購，公司成功拓展至非洲和南美市場，特別是在剛果（金）運營的Tenke Fungurume銅鈷礦，使其成爲全球第二大鈷生產商，在新能源電池原材料供應鏈中佔據關鍵地位。此外，公司在巴西持有的鈮礦（Catalão和Boa Vista項目）同樣是全球高品位鈮資源的重要供應源，鈮廣泛應用於高強度合金鋼製造，服務於航空航天與高端裝備製造領域。\\r\\n\\r\\n## 視覺信息解讀\\r\\n雖然本次未提供相關圖片資料，但從以往公開發布的公司宣傳材料、年報封面及礦山實景圖中可以推斷出，洛陽鉬業的品牌視覺通常以深藍、灰色爲主色調，象徵着工業穩重與科技感，配以礦山開採場景、現代化選礦廠或地球儀元素，突出其'全球化礦業巨頭'的定位。例如，在年度報告中常見大型露天礦坑航拍圖，展現宏大的開採規模；也有員工在智能化控制中心監控生產流程的畫面，體現數字化轉型成果。這些視覺符號共同塑造了一個傳統資源型企業向高科技、綠色化、國際化綜合礦業集團轉型的形象。若能獲取近期官方發佈的圖片，預計將看到更多關於綠色礦山建設、生態修復工程以及海外項目本地社區合作的內容，反映ESG（環境、社會與治理）理念的深入實踐。\\r\\n\\r\\n## 數據綜合分析\\r\\n從財務與運營數據來看，洛陽鉬業近年來保持穩健增長態勢。根據2023年年報顯示，公司全年實現營業收入約1,445億元人民幣，歸母淨利潤超過80億元，資產總額逾2,000億元，展現出強大的盈利能力和資產實力。在資源儲量方面，據JORC標準披露，公司控制的鉬金屬儲量超過200萬噸，鎢儲量約80萬噸，銅資源量達數千萬噸級別，鈷資源量亦達數百萬噸，資源稟賦極爲優越。產量方面，2023年公司年產鉬約1.7萬噸、鎢精礦摺合WO₃約2.5萬噸、銅金屬約22萬噸、鈷金屬約2.5萬噸，其中銅鈷產量主要來自剛果（金）和澳大利亞Northparkes項目。在全球礦業排名中，洛陽鉬業連續多年入選《福布斯》全球企業2000強，並在《財富》中國500強中位列前茅。據SNL Metals & Mining等機構統計，其鈷產量市場份額約佔全球總產量的15%-18%，僅次於嘉能可（Glencore），居世界第二位；而鉬產品的市場佔有率同樣位居全球前三。此外，公司研發投入持續增加，2023年研發費用超15億元，主要用於智能礦山建設、低品位礦石綜合利用技術及碳減排工藝優化，體現了向高質量發展模式轉型的決心。\\r\\n\\r\\n## 多維度洞察\\r\\n綜上所述，洛陽鉬業不僅是一家根植於中國河南的地方性礦業企業，更已發展爲具有全球資源配置能力的跨國礦業集團。其成功路徑體現出'立足本土優勢資源+戰略性海外擴張'的雙輪驅動模式。在國內，依託欒川世界級鉬鎢礦牀建立了穩固的基本盤；在海外，通過精準併購實現了對關鍵戰略礦產——尤其是新能源所需銅鈷資源——的有效掌控，契合全球能源轉型趨勢。與此同時，公司積極推進數字化、智能化和綠色礦山建設，如在北祕魯的Kisanfu銅鈷礦採用無人駕駛運輸系統和遠程監控平臺，提升安全與效率。未來，隨着電動汽車、儲能系統和可再生能源基礎設施對銅、鈷、鈮等金屬需求的持續攀升，洛陽鉬業的戰略價值將進一步凸顯。然而，其海外運營也面臨地緣政治風險、環保合規壓力及社區關系管理等挑戰，尤其是在剛果（金）等資源豐富但治理相對薄弱的國家。因此，如何平衡經濟效益與社會責任、強化可持續發展能力，將是決定其長期競爭力的關鍵所在。"}"""

# ===== SearchNode輸出示例（應該被過濾，不應進入論壇）=====

# SearchNode首次搜索查詢 - 多行JSON格式
SEARCH_NODE_FIRST_SEARCH = [
    "[11:16:35] 2025-11-06 11:16:35.567 | INFO     | InsightEngine.nodes.search_node:process_output:97 - 清理後的輸出: {",
    "[11:16:35] \"search_query\": \"大家怎麼看\"",
    "[11:16:35] \"search_tool\": \"search_topic_globally\"",
    "[11:16:35] \"reasoning\": \"這是搜索查詢的推理\"",
    "[11:16:35] \"enable_sentiment\": true",
    "[11:16:35] }"
]

# SearchNode反思搜索查詢 - 單行JSON格式
SEARCH_NODE_REFLECTION_SEARCH = """[11:17:05] 2025-11-06 11:17:05.547 | INFO     | InsightEngine.nodes.search_node:process_output:232 - 清理後的輸出: {"search_query": "AI教育 數據泄露 不公平", "search_tool": "search_hot_content", "reasoning": "需要了解近期關於AI教育的熱點爭議，特別是公衆最關心的數據安全和公平性問題，以補充具體案例和真實輿情數據", "time_period": "week", "enable_sentiment": true}"""

# ===== 錯誤日誌示例（應該被過濾，不應進入論壇）=====

# SummaryNode的JSON解析失敗錯誤日誌
SUMMARY_NODE_JSON_ERROR = "[11:55:31] 2025-11-06 11:55:31.763 | ERROR    | MediaEngine.nodes.summary_node:process_output:141 - JSON解析失敗: Unterminated string starting at: line 1 column 28 (char 27)"

# SummaryNode的JSON修復失敗錯誤日誌
SUMMARY_NODE_JSON_FIX_ERROR = "[11:55:31] 2025-11-06 11:55:31.799 | ERROR    | MediaEngine.nodes.summary_node:process_output:149 - JSON修復失敗，直接使用清理後的文本"

# SummaryNode的ERROR級別日誌（包含nodes.summary_node但不應被捕獲）
SUMMARY_NODE_ERROR_LOG = "[11:55:31] 2025-11-06 11:55:31.763 | ERROR    | MediaEngine.nodes.summary_node:process_output:141 - 發生錯誤：無法處理輸出"

# SummaryNode的Traceback錯誤日誌（雖然包含nodes.summary_node，但不應被捕獲）
SUMMARY_NODE_TRACEBACK = """[11:55:31] File "D:\\Programing\\BettaFish\\SingleEngineApp\\..\\MediaEngine\\nodes\\summary_node.py", line 138, in process_output
[11:55:31] result = json.loads(cleaned_output)"""

